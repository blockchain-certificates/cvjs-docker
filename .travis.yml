language: node_js
dist: focal
branches:
  only:
    - main
services:
  - docker
before_script:
  - npm run test -- --silent --noStackTrace
  - npm run semantic-release
script:
  - npm run build
  - docker run -p 9000:4000 -d cert-verifier-js
  - npm run test:docker
  - cd node_modules/vc-api-verifier-test-suite
  - npm install
  - npm run test
  - cd ../..
  - rm .version
